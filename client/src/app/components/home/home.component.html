
<!--<div id="main">-->
<!--  <div id="top">-->
<!--    <mat-tab-group id="slide" (selectedTabChange)="onTabChange($event)">-->
<!--      <mat-tab label="Artist">-->
<!--        @if (visiblePosts.length == 0) {-->
<!--          <div class="no-posts">-->
<!--            <h1 class="no-posts-text">No Posts Found</h1>-->
<!--          </div>-->
<!--        }-->
<!--        <div [ngClass]="{'middle': invisiblePosts.length > 0, 'middle2': invisiblePosts.length == 0}">-->
<!--          <div class="all">-->
<!--            <button [disabled]="isButtonDisabled" mat-fab color="primary" [ngClass]="{'invisibleButton': invisiblePosts.length == 0}" (click)="leftSlide()">-->
<!--              <mat-icon>keyboard_arrow_left</mat-icon>-->
<!--            </button>-->
<!--            <div [ngClass]="{'content': invisiblePosts.length > 0, 'content2': invisiblePosts.length == 0}">-->
<!--              <div class="posts-container">-->
<!--                @for (post of visiblePosts; track $index){-->
<!--                  <div class="post-card" [routerLink]="['/home/post/',post.id]">-->
<!--                    @if (post.image){-->
<!--                      <img [src]="post.image" alt="{{post.title}}" class="post-image">-->
<!--                    }@else {-->
<!--                      <img src="https://i.kym-cdn.com/entries/icons/original/000/039/761/nerdfacecover.jpg" alt="Placeholder Image" class="post-image">-->
<!--                    }-->
<!--                    <div class="post-content">-->
<!--                      <h2>{{ post.title }}</h2>-->
<!--                      <p>{{ post.content }}</p>-->
<!--                      <div class="post-meta">-->
<!--                        <span>By {{ post.user.username }}</span>-->
<!--                        <span>Likes: {{ post.likes }} | Dislikes: {{ post.dislikes }}</span>-->
<!--                      </div>-->
<!--                      @if (post.genre || post.artist || post.song){-->
<!--                        <div class="post-tags">-->
<!--                          @if (post.genre) {<span>Genre: {{ post.genre.name }}</span>}-->
<!--                          @if (post.artist) {<span>Artist: {{ post.artist.name }}</span>}-->
<!--                          @if (post.song) {<span>Song: {{ post.song.title }}</span>}-->
<!--                        </div>-->
<!--                      }-->
<!--                    </div>-->
<!--                  </div>-->
<!--                }-->
<!--              </div>-->
<!--            </div>-->
<!--            <button [disabled]="isButtonDisabled" mat-fab color="primary" [ngClass]="{'invisibleButton': invisiblePosts.length == 0}" (click)="rightSlide()">-->
<!--              <mat-icon>keyboard_arrow_right</mat-icon>-->
<!--            </button>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="button">-->
<!--          <button class="Btn" [routerLink]="['addPost/Artist']">-->
<!--            <mat-icon>add</mat-icon>-->
<!--          </button>-->
<!--        </div>-->
<!--      </mat-tab>-->
<!--      <mat-tab label="Genre">-->
<!--        @if (visiblePosts.length == 0) {-->
<!--          <div class="no-posts">-->
<!--            <h1 class="no-posts-text">No Posts Found</h1>-->
<!--          </div>-->
<!--        }-->
<!--        <div [ngClass]="{'middle': invisiblePosts.length > 0, 'middle2': invisiblePosts.length == 0}">-->
<!--          <div class="all">-->
<!--            <button [disabled]="isButtonDisabled" mat-fab color="primary" [ngClass]="{'invisibleButton': invisiblePosts.length == 0}" (click)="leftSlide()">-->
<!--              <mat-icon>keyboard_arrow_left</mat-icon>-->
<!--            </button>-->
<!--            <div [ngClass]="{'content': invisiblePosts.length > 0, 'content2': invisiblePosts.length == 0}">-->
<!--              <div class="posts-container">-->
<!--                @for (post of visiblePosts; track $index){-->
<!--                  <div class="post-card" [routerLink]="['/home/post/',post.id]">-->
<!--                    @if (post.image){-->
<!--                      <img [src]="post.image" alt="{{post.title}}" class="post-image">-->
<!--                    }@else {-->
<!--                      <img src="https://i.kym-cdn.com/entries/icons/original/000/039/761/nerdfacecover.jpg" alt="Placeholder Image" class="post-image">-->
<!--                    }-->
<!--                    <div class="post-content">-->
<!--                      <h2>{{ post.title }}</h2>-->
<!--                      <p>{{ post.content }}</p>-->
<!--                      <div class="post-meta">-->
<!--                        <span>By {{ post.user.username }}</span>-->
<!--                        <span>Likes: {{ post.likes }} | Dislikes: {{ post.dislikes }}</span>-->
<!--                      </div>-->
<!--                      @if (post.genre || post.artist || post.song){-->
<!--                        <div class="post-tags">-->
<!--                          @if (post.genre) {<span>Genre: {{ post.genre.name }}</span>}-->
<!--                          @if (post.artist) {<span>Artist: {{ post.artist.name }}</span>}-->
<!--                          @if (post.song) {<span>Song: {{ post.song.title }}</span>}-->
<!--                        </div>-->
<!--                      }-->
<!--                    </div>-->
<!--                  </div>-->
<!--                }-->
<!--              </div>-->
<!--            </div>-->
<!--            <button [disabled]="isButtonDisabled" mat-fab color="primary" [ngClass]="{'invisibleButton': invisiblePosts.length == 0}" (click)="rightSlide()">-->
<!--              <mat-icon>keyboard_arrow_right</mat-icon>-->
<!--            </button>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="button">-->
<!--          <button class="Btn" [routerLink]="['addPost/Genre']">-->
<!--            <mat-icon>add</mat-icon>-->
<!--          </button>-->
<!--        </div>-->
<!--      </mat-tab>-->
<!--      <mat-tab label="Song">-->
<!--        @if (visiblePosts.length == 0) {-->
<!--          <div class="no-posts">-->
<!--            <h1 class="no-posts-text">No Posts Found</h1>-->
<!--          </div>-->
<!--        }-->
<!--        <div [ngClass]="{'middle': invisiblePosts.length > 0, 'middle2': invisiblePosts.length == 0}">-->
<!--          <div class="all">-->
<!--            <button [disabled]="isButtonDisabled" mat-fab color="primary" [ngClass]="{'invisibleButton': invisiblePosts.length == 0}" (click)="leftSlide()">-->
<!--              <mat-icon>keyboard_arrow_left</mat-icon>-->
<!--            </button>-->
<!--            <div [ngClass]="{'content': invisiblePosts.length > 0, 'content2': invisiblePosts.length == 0}">-->
<!--            <div class="posts-container">-->
<!--                @for (post of visiblePosts; track $index){-->
<!--                  <div class="post-card" [routerLink]="['/home/post/',post.id]">-->
<!--                    @if (post.image){-->
<!--                      <img [src]="post.image" alt="{{post.title}}" class="post-image">-->
<!--                    }@else {-->
<!--                      <img src="https://i.kym-cdn.com/entries/icons/original/000/039/761/nerdfacecover.jpg" alt="Placeholder Image" class="post-image">-->
<!--                    }-->
<!--                    <div class="post-content">-->
<!--                      <h2>{{ post.title }}</h2>-->
<!--                      <p>{{ post.content }}</p>-->
<!--                      <div class="post-meta">-->
<!--                        <span>By {{ post.user.username }}</span>-->
<!--                        <span>Likes: {{ post.likes }} | Dislikes: {{ post.dislikes }}</span>-->
<!--                      </div>-->
<!--                      @if (post.genre || post.artist || post.song){-->
<!--                        <div class="post-tags">-->
<!--                          @if (post.genre) {<span>Genre: {{ post.genre.name }}</span>}-->
<!--                          @if (post.artist) {<span>Artist: {{ post.artist.name }}</span>}-->
<!--                          @if (post.song) {<span>Song: {{ post.song.title }}</span>}-->
<!--                        </div>-->
<!--                      }-->
<!--                    </div>-->
<!--                  </div>-->
<!--                }-->
<!--              </div>-->
<!--            </div>-->
<!--            <button [disabled]="isButtonDisabled" mat-fab color="primary" [ngClass]="{'invisibleButton': invisiblePosts.length == 0}" (click)="rightSlide()">-->
<!--              <mat-icon>keyboard_arrow_right</mat-icon>-->
<!--            </button>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="button">-->
<!--          <button class="Btn" [routerLink]="['addPost/Song']">-->
<!--            <mat-icon>add</mat-icon>-->
<!--          </button>-->
<!--        </div>-->
<!--      </mat-tab>-->
<!--    </mat-tab-group>-->
<!--  </div>-->
<!--  <div id="bottom">-->
<!--  </div>-->
<!--</div> -->
@if(!this.isMobile){
  <app-head-nav-bar></app-head-nav-bar>

<body>
<mat-sidenav-container>
  <mat-sidenav>{{ 'HOME.START' | translate }}</mat-sidenav>
  <mat-sidenav-content>
    <mat-chip-listbox [(ngModel)]="selectedFilters" aria-label="Cutest dog breeds" class="mat-mdc-chip-set-stacked">
      @for (str of ['Artist', 'Song', 'Genre']; track str) {
        <mat-chip-option [value]="str.toLowerCase()">{{ str }}</mat-chip-option>
      }
    </mat-chip-listbox>
  </mat-sidenav-content>
</mat-sidenav-container>
<main>
  <div>
    @for (post of posts; track post) {
      @if (selectedFilters && post[selectedFilters]) {
        <mat-card [routerLink]="'/home/post/'+post.id">
          <mat-card-header>
            <mat-card-title>{{ post.title }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
          <img [src]="post.image">
          <span>{{'HOME.POSTED_BY' | translate}}  {{ post.user.username }}</span>
          @if (post.genre || post.artist || post.song){
            <div class="post-tags">
              @if (post.genre) {<span>{{ 'HOME.GENRE' | translate }}: {{ post.genre.name }}</span>}
              @if (post.artist) {<span>{{ 'HOME.ARTIST' | translate }}: {{ post.artist.name }}</span>}
              @if (post.song) {<span>{{ 'HOME.SONG' | translate }}: {{ post.song.title }}</span>}
            </div>
          }
          </mat-card-content>
        </mat-card>
      } @else if (!selectedFilters) {
        <mat-card [routerLink]="'/home/post/'+post.id">
          <mat-card-header>
            <mat-card-title>{{ post.title }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <img [src]="post.image">
            <span>{{'HOME.POSTED_BY' | translate}}  {{ post.user.username }}</span>
            @if (post.genre || post.artist || post.song){
              <div class="post-tags">
                @if (post.genre) {<span>{{ 'HOME.GENRE' | translate }}: {{ post.genre.name }}</span>}
                @if (post.artist) {<span>{{ 'HOME.ARTIST' | translate }}: {{ post.artist.name }}</span>}
                @if (post.song) {<span>{{ 'HOME.SONG' | translate }}: {{ post.song.title }}</span>}
              </div>
          }
          </mat-card-content>
        </mat-card>
      }
    }
  </div>
</main>
  <mat-sidenav-container id="right-nav">
  <mat-expansion-panel id="create-post-expansion-panel">
    <mat-expansion-panel-header>
      {{ 'HOME.CREATE_POST' | translate }}
    </mat-expansion-panel-header>
    <mat-list>
      <mat-list-item [routerLink]="'/home/addPost/Artist'">
        {{ 'HOME.ARTIST' | translate }}

      </mat-list-item>
      <mat-list-item [routerLink]="'/home/addPost/Song'">
        {{ 'HOME.SONG' | translate }}
      </mat-list-item>
      <mat-list-item [routerLink]="'/home/addPost/Genre'">
        {{ 'HOME.GENRE' | translate }}
      </mat-list-item>
    </mat-list>
  </mat-expansion-panel>
  <ng-container>
      @for (str of ['LEADERBOARD.TOP_ARTISTS' | translate , 'LEADERBOARD.TOP_SONGS' | translate, 'LEADERBOARD.TOP_GENRE' | translate]; track str) {
        <mat-expansion-panel>
          <mat-expansion-panel-header>
              {{ str }}
          </mat-expansion-panel-header>
          <div>
            @if (str === ('LEADERBOARD.TOP_ARTISTS' | translate)) {
              <mat-list>
                  @for (item of this.topArtists; track item) {
                    <mat-list-item [routerLink]="'/home/artistProfile/'+ item.id">
                    {{ item.name }}
                    </mat-list-item>
                  }
              </mat-list>
            } @else if (str === ('LEADERBOARD.TOP_SONGS' | translate)) {
              <mat-list>
                  @for (item of this.topSongs; track item) {
                    <mat-list-item (click)="window.open(item.link)">
                    {{ item.title }}
                    </mat-list-item>
                  }
              </mat-list>
            } @else if (str === ('LEADERBOARD.TOP_GENRE' | translate)) {
              <mat-list>
                  @for (item of this.topGenres; track item) {
                    <mat-list-item>
                    {{ item.name }}
                    </mat-list-item>
                  }
              </mat-list>
            }
          </div>
        </mat-expansion-panel>
          }
    </ng-container>
</mat-sidenav-container>
</body>
}

@else{
  <app-head-nav-bar>
  </app-head-nav-bar>
<body>
<main>
  <div class="posts-container">
    @for (post of posts; track post) {
      @if (selectedFilters && post[selectedFilters]) {
        <mat-card [routerLink]="'/home/post/'+post.id">
          <mat-card-header>
            <mat-card-title>{{ post.title }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <img [src]="post.image">
            <span>Posted By {{ post.user.username }}</span>
            @if (post.genre || post.artist || post.song) {
              <div class="post-tags">
                @if (post.genre) {<span>Genre: {{ post.genre.name }}</span>}
                @if (post.artist) {<span>Artist: {{ post.artist.name }}</span>}
                @if (post.song) {<span>Song: {{ post.song.title }}</span>}
              </div>
            }
          </mat-card-content>
        </mat-card>
      } @else if (!selectedFilters) {
        <mat-card [routerLink]="'/home/post/'+post.id">
          <mat-card-header>
            <mat-card-title>{{ post.title }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <img [src]="post.image">
            <span>Posted By {{ post.user.username }}</span>
            @if (post.genre || post.artist || post.song) {
              <div class="post-tags">
                @if (post.genre) {<span>Genre: {{ post.genre.name }}</span>}
                @if (post.artist) {<span>Artist: {{ post.artist.name }}</span>}
                @if (post.song) {<span>Song: {{ post.song.title }}</span>}
              </div>
            }
          </mat-card-content>
        </mat-card>
      }
    }
  </div>
</main>

<div id="bottomBar">
  <div class="filterButton">
    <button mat-fab color="primary" [matMenuTriggerFor]="menu">
      <mat-icon>category</mat-icon>
    </button>
    <mat-menu #menu="matMenu" >
      @for (str of  ['Artist', 'Song', 'Genre']; track str) {
      <button class="selectButtons" mat-menu-item (click)="selected(str)">{{str}}</button>
      }
    </mat-menu>
  </div>
  <div class="addButton">
    <button mat-fab color="accent" [matMenuTriggerFor]="addMenu">
      <mat-icon>add</mat-icon>
    </button>
    <mat-menu #addMenu="matMenu">
      <button mat-menu-item [routerLink]="['/home/addPost/Artist']">Artist</button>
      <button mat-menu-item [routerLink]="['/home/addPost/Genre']">Genre</button>
      <button mat-menu-item [routerLink]="['/home/addPost/Song']">Song</button>
    </mat-menu>
  </div>
  <div class="tree">
    <button mat-fab color="primary" [matMenuTriggerFor]="treeMenu">
      <mat-icon>leaderboard</mat-icon>
    </button>
    <mat-menu #treeMenu="matMenu" class="matTree" >
      <ng-container>
        @for (str of ['Top Artists', 'Top Songs', 'Top Genres']; track str) {
          <mat-expansion-panel (click)="handlePanelClick($event)">
            <mat-expansion-panel-header>
              {{ str }}
            </mat-expansion-panel-header>
            <div>
              @if (str === 'Top Artists') {
                <mat-list>
                  @for (item of this.topArtists; track item) {
                    <mat-list-item [routerLink]="'/home/artistProfile/'+ item.id">
                      {{ item.name }}
                    </mat-list-item>
                  }
                </mat-list>
              } @else if (str === 'Top Songs') {
                <mat-list>
                  @for (item of this.topSongs; track item) {
                    <mat-list-item  (click)="openLink($event, item.link)">
                      {{ item.title }}
                    </mat-list-item>
                  }
                </mat-list>
              } @else if (str === 'Top Genres') {
                <mat-list>
                  @for (item of this.topGenres; track item) {
                    <mat-list-item>
                      {{ item.name }}
                    </mat-list-item>
                  }
                </mat-list>
              }
            </div>
          </mat-expansion-panel>
        }
      </ng-container>
    </mat-menu>
  </div>
</div>


</body>

}
