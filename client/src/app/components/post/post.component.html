<app-head-nav-bar></app-head-nav-bar>
<button (click)="goBack()" color="primary" mat-button>‚ùÆ {{ 'POST_FORM.GO_BACK_BUTTON' | translate }}</button>
@if (post) {
  <div class="post-container">
    @if (post.image) {
      <img [src]="post.image" alt="{{post.title}}" class="post-image">
    } @else {
      <img
        src="https://i.kym-cdn.com/entries/icons/original/000/039/761/nerdfacecover.jpg"
        alt="Placeholder Image" class="post-image">
    }
    <div class="post-content">
      <h1 [innerHTML]="post.title | generictranslate | async"></h1>
      <p [innerHTML]="post.content | generictranslate | async"></p>
      <div class="post-meta">
        <span
          [routerLink]="['/home/usersPosts/' + post.user.id]">{{ 'HOME.POSTED_BY' | translate }} {{ post.user.username }}</span>
        <!--        <div class="like-dislike-container">-->
        <!--          <mat-icon (click)="likePost()" class="like-icon">thumb_up</mat-icon>-->
        <!--          <span>Likes: {{ post.likes }} | Dislikes: {{ post.dislikes }}</span>-->
        <!--          <mat-icon (click)="dislikePost()" class="dislike-icon">thumb_down</mat-icon>-->
        <!--        </div>-->
        <div class="like-dislike-container">
          <div class="icons-box">
            <div>
              <button [disabled]="likeProcessing || disliked" mat-button (click)="likePost()"
                      color="{{ liked ? 'primary' : '' }}">
                <mat-icon>{{ liked ? 'thumb_up' : 'thumb_up_off_alt' }}</mat-icon>
                <p>{{ post.likes }}</p>
              </button>
              <button [disabled]="likeProcessing || liked" class="dislike-button" mat-button (click)="dislikePost()"
                      color="{{ disliked ? 'warn' : '' }}">
                <mat-icon>{{ disliked ? 'thumb_down' : 'thumb_down_off_alt' }}</mat-icon>
                <p>{{ post.dislikes }}</p>
              </button>
            </div>
          </div>
        </div>
      </div>
      @if (post.genre || post.artist || post.song) {
        <div class="post-tags">
          @if (post.genre) {
            <span>{{ 'HOME.GENRE' | translate }}: {{ post.genre.name }}</span>
          }
          @if (post.artist) {
            <span>{{ 'HOME.ARTIST' | translate }}: {{ post.artist.name }}</span>
          }
          @if (post.song) {
            <span>{{ 'HOME.SONG' | translate }}: {{ post.song.title }}</span>
          }
        </div>
      }
    </div>
  </div>
  <!-- post.component.html -->
  <div class="comments-section">
    <h2>{{ 'POST.COMMENTS' | translate }}</h2>
    <div *ngFor="let comment of commentService.comments; trackBy: trackByCommentId">
      <app-comment [comment]="comment" [activeUser]="activeUser"></app-comment>
    </div>
    <div class="comment-form">
      <h3>{{ 'POST_FORM.'+ commentService.currentAction | translate }} {{'POST_FORM.COMMENT' | translate}}</h3>
      <textarea placeholder="{{'POST.MESSAGE' | translate}}" [(ngModel)]="commentService.newComment.message"></textarea>
      <button (click)="handleAction()">{{ 'POST.SUBMIT' | translate }}</button>
      <button *ngIf="commentService.currentAction !== 'Add'" (click)="resetAction()">{{ 'POST.CANCEL' | translate }}</button>
    </div>
  </div>
}
